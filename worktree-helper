#!/usr/bin/env bash
# worktree-helper - Sync gitignored files to git worktrees
set -euo pipefail

VERSION="0.1.0"
CONFIG_DIR="${XDG_CONFIG_HOME:-$HOME/.config}/worktree-helper"

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Source library modules (in dependency order)
source "${SCRIPT_DIR}/lib/logging.sh"
source "${SCRIPT_DIR}/lib/utils.sh"
source "${SCRIPT_DIR}/lib/git.sh"
source "${SCRIPT_DIR}/lib/config.sh"
source "${SCRIPT_DIR}/lib/capture.sh"
source "${SCRIPT_DIR}/lib/sync.sh"

# Source command modules
source "${SCRIPT_DIR}/cmds/help.sh"
source "${SCRIPT_DIR}/cmds/init.sh"
source "${SCRIPT_DIR}/cmds/add.sh"
source "${SCRIPT_DIR}/cmds/show.sh"
source "${SCRIPT_DIR}/cmds/status.sh"
source "${SCRIPT_DIR}/cmds/list.sh"

# Source main dispatcher
source "${SCRIPT_DIR}/main.sh"

main "$@"
